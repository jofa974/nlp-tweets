stages:
  prepare_data:
    foreach:
      - SKCountVectorizer
      - TFTokenizer
      - SKTfidfVectorizer
    do:
      wdir: ../
      cmd: python src/prepare.py --preprocessor=${item}
      deps:
        - data/raw/train.csv
        - src/prepare.py
        - src/preprocessors/abstract.py
        - src/preprocessors/${item}.py
      outs:
        - data/prepared/${item}/texts.json
        - data/prepared/${item}/labels.json
        - data/prepared/${item}/preproc.joblib
