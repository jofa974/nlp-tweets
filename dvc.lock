schema: '2.0'
stages:
  train@0:
    cmd: python src/train.py --model-class=SKLogisticRegression --preprocessor=SKCountVectorizer
    deps:
    - path: data/prepared/SKCountVectorizer/labels.json
      md5: 76e06f8528ff37525b0f13d4dc8d6d0e
      size: 22860
    - path: data/prepared/SKCountVectorizer/preproc.joblib
      md5: c01c0df08ca3aa074fc0f9ee5e878c89
      size: 177904
    - path: data/prepared/SKCountVectorizer/texts.json
      md5: db956128ffd8a325d8e1a290c8eda93d
      size: 517672
    - path: src/dataset.py
      md5: ec07c88410f06d9854f74744b77490be
      size: 2511
    - path: src/models/SKLogisticRegression.py
      md5: 3c2f8b80c1cd29c01a6edeb533a93525
      size: 1181
    - path: src/models/abstract.py
      md5: c1f903ca5687282956c8e7a9600b0349
      size: 1012
    - path: src/train.py
      md5: b09e35571ac6a7198afe3231a3cff1ef
      size: 1662
    params:
      params.yaml:
        SKLogisticRegression:
          max_iter: 1000
    outs:
    - path: models/SKLogisticRegression/model.joblib
      md5: 0a57ca112ee076c73f8996ce97650546
      size: 109091
    - path: models/SKLogisticRegression/train_metrics.json
      md5: 550a2de49bbf73d99cbdab14a2d29152
      size: 32
  test@0:
    cmd: python src/test.py --model-class=SKLogisticRegression --preprocessor=SKCountVectorizer
    deps:
    - path: models/SKLogisticRegression/model.joblib
      md5: 0a57ca112ee076c73f8996ce97650546
      size: 109091
    - path: src/test.py
      md5: d1cd88e5103fab249ff91d143acbdd3d
      size: 1712
    outs:
    - path: models/SKLogisticRegression/test_metrics.json
      md5: c2a1f67ff58a487bf593ba600b2cffda
      size: 32
    - path: models/SKLogisticRegression/test_predictions.csv
      md5: f98588ebbaba89c1b34c2b477d95ffe2
      size: 32670
  predict@0:
    cmd: python src/predict.py --model-class=SKLogisticRegression
    deps:
    - path: data/raw/test.csv
      md5: ff248529f207ea164d73636e5b1b251d
      size: 420783
    - path: models/SKLogisticRegression/model.joblib
      md5: 0a57ca112ee076c73f8996ce97650546
      size: 109091
    - path: models/SKLogisticRegression/test_metrics.json
      md5: c2a1f67ff58a487bf593ba600b2cffda
      size: 32
    - path: src/predict.py
      md5: dcd79102586cf025166345b58fe5e825
      size: 605
    outs:
    - path: data/predictions/SKLogisticRegression_prediction.csv
      md5: d41d8cd98f00b204e9800998ecf8427e
      size: 0
  train@1:
    cmd: python src/train.py --model-class=TFConv1D --preprocessor=TFTokenizer
    deps:
    - path: data/prepared/TFTokenizer/labels.json
      md5: 76e06f8528ff37525b0f13d4dc8d6d0e
      size: 22860
    - path: data/prepared/TFTokenizer/preproc.joblib
      md5: e8b2d54bbf7eb0e4159445eb73d072b8
      size: 541799
    - path: data/prepared/TFTokenizer/texts.json
      md5: db956128ffd8a325d8e1a290c8eda93d
      size: 517672
    - path: src/dataset.py
      md5: ec07c88410f06d9854f74744b77490be
      size: 2511
    - path: src/models/TFConv1D.py
      md5: 394dfc4cc3a2061f3a919b8b660c1225
      size: 2442
    - path: src/models/abstract.py
      md5: c1f903ca5687282956c8e7a9600b0349
      size: 1012
    - path: src/train.py
      md5: b09e35571ac6a7198afe3231a3cff1ef
      size: 1662
    params:
      params.yaml:
        TFConv1D:
          lr: 0.001
          batch_size: 16
          epochs: 20
    outs:
    - path: models/TFConv1D/model.h5
      md5: edd60fd5dd313285c39e4f4cb3072323
      size: 5612360
    - path: models/TFConv1D/train_metrics.json
      md5: e46335947bebfa33680805e4d5d515be
      size: 32
  test@1:
    cmd: python src/test.py --model-class=TFConv1D --preprocessor=TFTokenizer
    deps:
    - path: models/TFConv1D/model.h5
      md5: edd60fd5dd313285c39e4f4cb3072323
      size: 5612360
    - path: src/test.py
      md5: d1cd88e5103fab249ff91d143acbdd3d
      size: 1712
    outs:
    - path: models/TFConv1D/test_metrics.json
      md5: 744c6214368201d0b850a5aed4169db5
      size: 32
    - path: models/TFConv1D/test_predictions.csv
      md5: de480adf8e65c29a4909beb89378fde4
      size: 19746
  predict@1:
    cmd: python src/predict.py --model-class=TFConv1D
    deps:
    - path: data/raw/test.csv
      md5: ff248529f207ea164d73636e5b1b251d
      size: 420783
    - path: models/TFConv1D/model.h5
      md5: edd60fd5dd313285c39e4f4cb3072323
      size: 5612360
    - path: models/TFConv1D/test_metrics.json
      md5: 744c6214368201d0b850a5aed4169db5
      size: 32
    - path: src/predict.py
      md5: dcd79102586cf025166345b58fe5e825
      size: 605
    outs:
    - path: data/predictions/TFConv1D_prediction.csv
      md5: d41d8cd98f00b204e9800998ecf8427e
      size: 0
  train@2:
    cmd: python src/train.py --model-class=TFlstm --preprocessor=TFTokenizer
    deps:
    - path: data/prepared/TFTokenizer/labels.json
      md5: 76e06f8528ff37525b0f13d4dc8d6d0e
      size: 22860
    - path: data/prepared/TFTokenizer/preproc.joblib
      md5: e8b2d54bbf7eb0e4159445eb73d072b8
      size: 541799
    - path: data/prepared/TFTokenizer/texts.json
      md5: db956128ffd8a325d8e1a290c8eda93d
      size: 517672
    - path: src/dataset.py
      md5: ec07c88410f06d9854f74744b77490be
      size: 2511
    - path: src/models/TFlstm.py
      md5: 50c66e2ec917f51d6e4754316559034b
      size: 2400
    - path: src/models/abstract.py
      md5: c1f903ca5687282956c8e7a9600b0349
      size: 1012
    - path: src/train.py
      md5: b09e35571ac6a7198afe3231a3cff1ef
      size: 1662
    params:
      params.yaml:
        TFlstm:
          lr: 0.0001
          batch_size: 128
          epochs: 200
    outs:
    - path: models/TFlstm/model.h5
      md5: f11ced87d6de2a1781915aed2693168e
      size: 87484736
    - path: models/TFlstm/train_metrics.json
      md5: 9b919c6f412ccbcbf27787141c7942db
      size: 32
  test@2:
    cmd: python src/test.py --model-class=TFlstm --preprocessor=TFTokenizer
    deps:
    - path: models/TFlstm/model.h5
      md5: f11ced87d6de2a1781915aed2693168e
      size: 87484736
    - path: src/test.py
      md5: d1cd88e5103fab249ff91d143acbdd3d
      size: 1712
    outs:
    - path: models/TFlstm/test_metrics.json
      md5: 57ecf83b2fef0d0c824c171bf1511c09
      size: 32
    - path: models/TFlstm/test_predictions.csv
      md5: 7bea33f41165c421f7e4cc672ecaf13b
      size: 21285
  predict@2:
    cmd: python src/predict.py --model-class=TFlstm
    deps:
    - path: data/raw/test.csv
      md5: ff248529f207ea164d73636e5b1b251d
      size: 420783
    - path: models/TFlstm/model.h5
      md5: f11ced87d6de2a1781915aed2693168e
      size: 87484736
    - path: models/TFlstm/test_metrics.json
      md5: 57ecf83b2fef0d0c824c171bf1511c09
      size: 32
    - path: src/predict.py
      md5: dcd79102586cf025166345b58fe5e825
      size: 605
    outs:
    - path: data/predictions/TFlstm_prediction.csv
      md5: d41d8cd98f00b204e9800998ecf8427e
      size: 0
  compare:
    cmd: python src/compare.py
    deps:
    - path: models
      md5: c41b6dd0ecb75c3851d0eb61f0efece2.dir
      size: 106763876
      nfiles: 51
    - path: src/compare.py
      md5: 98e6758ba9136935249d845a0a509894
      size: 1028
    outs:
    - path: roc_curves.png
      md5: d32a7aa03b27c952a4b0b61aea504aa6
      size: 38818
  train@3:
    cmd: python src/train.py --model-class=TFDense --preprocessor=SKTfidfVectorizer
    deps:
    - path: data/prepared/SKTfidfVectorizer/labels.json
      md5: 76e06f8528ff37525b0f13d4dc8d6d0e
      size: 22860
    - path: data/prepared/SKTfidfVectorizer/preproc.joblib
      md5: 0ff26bedd3f52d5df5c62883c6aa4170
      size: 395036
    - path: data/prepared/SKTfidfVectorizer/texts.json
      md5: db956128ffd8a325d8e1a290c8eda93d
      size: 517672
    - path: src/dataset.py
      md5: ec07c88410f06d9854f74744b77490be
      size: 2511
    - path: src/models/TFDense.py
      md5: 95a772ab4d8e7d06f91552b36d01f230
      size: 2013
    - path: src/models/abstract.py
      md5: c1f903ca5687282956c8e7a9600b0349
      size: 1012
    - path: src/train.py
      md5: b09e35571ac6a7198afe3231a3cff1ef
      size: 1662
    params:
      params.yaml:
        TFDense:
          lr: 0.001
          batch_size: 8
          epochs: 20
    outs:
    - path: models/TFDense/model.h5
      md5: 003c821f1a954016364a89047a9e8b26
      size: 10481808
    - path: models/TFDense/train_metrics.json
      md5: 3c10fc51d3fb92911a1f482ce8b679df
      size: 32
  test@3:
    cmd: python src/test.py --model-class=TFDense --preprocessor=SKTfidfVectorizer
    deps:
    - path: models/TFDense/model.h5
      md5: 003c821f1a954016364a89047a9e8b26
      size: 10481808
    - path: src/test.py
      md5: d1cd88e5103fab249ff91d143acbdd3d
      size: 1712
    outs:
    - path: models/TFDense/test_metrics.json
      md5: e38b0848ad3751b2a05c0edb1ee3ef87
      size: 32
    - path: models/TFDense/test_predictions.csv
      md5: 1c5033e0753e42186c1ba96d262174b6
      size: 19759
  predict@3:
    cmd: python src/predict.py --model-class=TFDense
    deps:
    - path: data/raw/test.csv
      md5: ff248529f207ea164d73636e5b1b251d
      size: 420783
    - path: models/TFDense/model.h5
      md5: 003c821f1a954016364a89047a9e8b26
      size: 10481808
    - path: models/TFDense/test_metrics.json
      md5: e38b0848ad3751b2a05c0edb1ee3ef87
      size: 32
    - path: src/predict.py
      md5: dcd79102586cf025166345b58fe5e825
      size: 605
    outs:
    - path: data/predictions/TFDense_prediction.csv
      md5: d41d8cd98f00b204e9800998ecf8427e
      size: 0
