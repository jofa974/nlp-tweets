schema: '2.0'
stages:
  train@0:
    cmd: python src/train.py --model-class=SKLogisticRegression --preprocessor=SKCountVectorizer
    deps:
    - path: data/prepared/SKCountVectorizer/labels.json
      md5: 76e06f8528ff37525b0f13d4dc8d6d0e
      size: 22860
    - path: data/prepared/SKCountVectorizer/preproc.joblib
      md5: 1f0a7457a2db376dd91dea3d618b1380
      size: 172555
    - path: data/prepared/SKCountVectorizer/texts.json
      md5: 1586b0b6d61168464daaee5cfded5390
      size: 538737
    - path: src/dataset.py
      md5: a532bf0730fe95ba42f06354de6d21f1
      size: 2578
    - path: src/models/SKLogisticRegression.py
      md5: e8416f86d344e3c0fcdbc891e968ecaa
      size: 1466
    - path: src/models/abstract.py
      md5: e698247b58fb3b7f58ca6a46168e4623
      size: 3702
    - path: src/train.py
      md5: ecc7955c2d8f9bde20c036fd2f64b576
      size: 1679
    params:
      params.yaml:
        SKLogisticRegression:
          max_iter: 100
    outs:
    - path: models/SKLogisticRegression/model.joblib
      md5: 7028a48c020a90abb3853c11723cecfe
      size: 107133
    - path: models/SKLogisticRegression/train_metrics.json
      md5: 69ec6b95041d7f5a64365ae4d0edbcb4
      size: 32
  test@0:
    cmd: python src/test.py --model-class=SKLogisticRegression --preprocessor=SKCountVectorizer
    deps:
    - path: models/SKLogisticRegression/model.joblib
      md5: 7028a48c020a90abb3853c11723cecfe
      size: 107133
    - path: src/test.py
      md5: 0a9b433ec6b2097db83627b26ce1506c
      size: 2147
    outs:
    - path: models/SKLogisticRegression/test_metrics.json
      md5: dac4213d4cb35b21ff504d053255775c
      size: 32
    - path: models/SKLogisticRegression/test_predictions.csv
      md5: 285286550a0daad274d915bfebad5482
      size: 32690
  predict@0:
    cmd: python src/predict.py --model-class=SKLogisticRegression --preprocessor=SKCountVectorizer
    deps:
    - path: data/raw/test.csv
      md5: ff248529f207ea164d73636e5b1b251d
      size: 420783
    - path: models/SKLogisticRegression/model.joblib
      md5: 7028a48c020a90abb3853c11723cecfe
      size: 107133
    - path: models/SKLogisticRegression/test_metrics.json
      md5: dac4213d4cb35b21ff504d053255775c
      size: 32
    - path: src/predict.py
      md5: 9befb647389941cd8370434ed46dac30
      size: 1399
    outs:
    - path: models/SKLogisticRegression/submission.csv
      md5: c9cf59473f29ad2b894f6e8f256ac437
      size: 79675
  train@1:
    cmd: python src/train.py --model-class=TFConv1D --preprocessor=TFTokenizer
    deps:
    - path: data/prepared/TFTokenizer/labels.json
      md5: 76e06f8528ff37525b0f13d4dc8d6d0e
      size: 22860
    - path: data/prepared/TFTokenizer/preproc.joblib
      md5: ba711d2d031ff371cf808a92868286f2
      size: 529836
    - path: data/prepared/TFTokenizer/texts.json
      md5: 1586b0b6d61168464daaee5cfded5390
      size: 538737
    - path: src/dataset.py
      md5: a532bf0730fe95ba42f06354de6d21f1
      size: 2578
    - path: src/models/TFConv1D.py
      md5: 845d5ef5811aebcec22c1b9f7a4b8792
      size: 1253
    - path: src/models/abstract.py
      md5: e698247b58fb3b7f58ca6a46168e4623
      size: 3702
    - path: src/train.py
      md5: ecc7955c2d8f9bde20c036fd2f64b576
      size: 1679
    params:
      params.yaml:
        TFConv1D:
          lr: 0.0001
          batch_size: 16
          epochs: 60
    outs:
    - path: models/TFConv1D/model.h5
      md5: c7e0cfd0f55e4c4ce4f1c7447940a2a0
      size: 10689984
    - path: models/TFConv1D/train_metrics.json
      md5: 854b2d84eac17a6c889a52fa1748c9c5
      size: 32
  test@1:
    cmd: python src/test.py --model-class=TFConv1D --preprocessor=TFTokenizer
    deps:
    - path: models/TFConv1D/model.h5
      md5: c7e0cfd0f55e4c4ce4f1c7447940a2a0
      size: 10689984
    - path: src/test.py
      md5: 0a9b433ec6b2097db83627b26ce1506c
      size: 2147
    outs:
    - path: models/TFConv1D/test_metrics.json
      md5: d690be23ae6b4c9919b87b3a45bf2dd8
      size: 32
    - path: models/TFConv1D/test_predictions.csv
      md5: 10095a987b96db8e435dc136621aa9a6
      size: 20311
  predict@1:
    cmd: python src/predict.py --model-class=TFConv1D --preprocessor=TFTokenizer
    deps:
    - path: data/raw/test.csv
      md5: ff248529f207ea164d73636e5b1b251d
      size: 420783
    - path: models/TFConv1D/model.h5
      md5: c7e0cfd0f55e4c4ce4f1c7447940a2a0
      size: 10689984
    - path: models/TFConv1D/test_metrics.json
      md5: d690be23ae6b4c9919b87b3a45bf2dd8
      size: 32
    - path: src/predict.py
      md5: 9befb647389941cd8370434ed46dac30
      size: 1399
    outs:
    - path: models/TFConv1D/submission.csv
      md5: 017a2a46ec49f037a509ee47bf461e99
      size: 53313
  train@2:
    cmd: python src/train.py --model-class=TFlstm --preprocessor=GloVeVectorizer
    deps:
    - path: data/prepared/GloVeVectorizer/labels.json
      md5: 76e06f8528ff37525b0f13d4dc8d6d0e
      size: 22860
    - path: data/prepared/GloVeVectorizer/preproc.joblib
      md5: 50dac33b370543b794ecfce13b8a4a60
      size: 529836
    - path: data/prepared/GloVeVectorizer/texts.json
      md5: 1586b0b6d61168464daaee5cfded5390
      size: 538737
    - path: src/dataset.py
      md5: a532bf0730fe95ba42f06354de6d21f1
      size: 2578
    - path: src/models/TFlstm.py
      md5: fa31128c531bd25786be10b9fa28c46c
      size: 2423
    - path: src/models/abstract.py
      md5: e698247b58fb3b7f58ca6a46168e4623
      size: 3702
    - path: src/train.py
      md5: ecc7955c2d8f9bde20c036fd2f64b576
      size: 1679
    params:
      params.yaml:
        TFlstm:
          lr: 0.0001
          batch_size: 16
          epochs: 60
    outs:
    - path: models/TFlstm/model.h5
      md5: 37aceb4b7be989a9dab1a1ddd8e894ea
      size: 66708496
    - path: models/TFlstm/train_metrics.json
      md5: 07297faff16903c28c1a1be92b9171d4
      size: 32
  test@2:
    cmd: python src/test.py --model-class=TFlstm --preprocessor=GloVeVectorizer
    deps:
    - path: models/TFlstm/model.h5
      md5: 37aceb4b7be989a9dab1a1ddd8e894ea
      size: 66708496
    - path: src/test.py
      md5: 0a9b433ec6b2097db83627b26ce1506c
      size: 2147
    outs:
    - path: models/TFlstm/test_metrics.json
      md5: d77828b20f95db4b9271b643404d9fda
      size: 32
    - path: models/TFlstm/test_predictions.csv
      md5: 5b57a7bac46e198a112efbe4d868d3de
      size: 19257
  predict@2:
    cmd: python src/predict.py --model-class=TFlstm --preprocessor=GloVeVectorizer
    deps:
    - path: data/raw/test.csv
      md5: ff248529f207ea164d73636e5b1b251d
      size: 420783
    - path: models/TFlstm/model.h5
      md5: 37aceb4b7be989a9dab1a1ddd8e894ea
      size: 66708496
    - path: models/TFlstm/test_metrics.json
      md5: d77828b20f95db4b9271b643404d9fda
      size: 32
    - path: src/predict.py
      md5: 9befb647389941cd8370434ed46dac30
      size: 1399
    outs:
    - path: models/TFlstm/submission.csv
      md5: 779633aa0a0c15d5d9ce060b5840d501
      size: 50926
  compare:
    cmd: python src/compare.py
    deps:
    - path: models
      md5: 65c434517a12edebd2ae904687c6b982.dir
      size: 291955156
      nfiles: 95
    - path: src/compare.py
      md5: 7982b40609f0551cc08ca3c471dd0357
      size: 995
    outs:
    - path: roc_curves.png
      md5: c06f2b226691aaf71d21bd6d77f885c1
      size: 37977
  train@3:
    cmd: python src/train.py --model-class=TFDense --preprocessor=SKTfidfVectorizer
    deps:
    - path: data/prepared/SKTfidfVectorizer/labels.json
      md5: 76e06f8528ff37525b0f13d4dc8d6d0e
      size: 22860
    - path: data/prepared/SKTfidfVectorizer/preproc.joblib
      md5: dd2fa60ee21851ab94826b168458a7a2
      size: 385767
    - path: data/prepared/SKTfidfVectorizer/texts.json
      md5: 1586b0b6d61168464daaee5cfded5390
      size: 538737
    - path: src/dataset.py
      md5: a532bf0730fe95ba42f06354de6d21f1
      size: 2578
    - path: src/models/TFDense.py
      md5: df3b0540c5d62a147e01b2352edc7a2d
      size: 832
    - path: src/models/abstract.py
      md5: e698247b58fb3b7f58ca6a46168e4623
      size: 3702
    - path: src/train.py
      md5: ecc7955c2d8f9bde20c036fd2f64b576
      size: 1679
    params:
      params.yaml:
        TFDense:
          lr: 0.0001
          batch_size: 16
          epochs: 60
    outs:
    - path: models/TFDense/model.h5
      md5: 5977ef23caa361cbde1da88622af9162
      size: 10293648
    - path: models/TFDense/train_metrics.json
      md5: 97d1bec8ab349e10d00b271f01ff2082
      size: 32
  test@3:
    cmd: python src/test.py --model-class=TFDense --preprocessor=SKTfidfVectorizer
    deps:
    - path: models/TFDense/model.h5
      md5: 5977ef23caa361cbde1da88622af9162
      size: 10293648
    - path: src/test.py
      md5: 0a9b433ec6b2097db83627b26ce1506c
      size: 2147
    outs:
    - path: models/TFDense/test_metrics.json
      md5: e27ae4e665e55a75161182a171503c3f
      size: 32
    - path: models/TFDense/test_predictions.csv
      md5: b410d67dd10ed2b60e73b5b010ea9b66
      size: 19805
  predict@3:
    cmd: python src/predict.py --model-class=TFDense --preprocessor=SKTfidfVectorizer
    deps:
    - path: data/raw/test.csv
      md5: ff248529f207ea164d73636e5b1b251d
      size: 420783
    - path: models/TFDense/model.h5
      md5: 5977ef23caa361cbde1da88622af9162
      size: 10293648
    - path: models/TFDense/test_metrics.json
      md5: e27ae4e665e55a75161182a171503c3f
      size: 32
    - path: src/predict.py
      md5: 9befb647389941cd8370434ed46dac30
      size: 1399
    outs:
    - path: models/TFDense/submission.csv
      md5: 16e20172321a8c245e42ee02bb5f57c5
      size: 52265
  fetch_data:
    cmd: ./src/fetch_data.sh && ./src/fetch_glove.sh
    deps:
    - path: src/fetch_data.sh
      md5: 06554301f9f7396ae15d625ccdccbec9
      size: 170
    - path: src/fetch_glove.sh
      md5: 5287fdd6c233b3bc3741de5ee5644105
      size: 201
    outs:
    - path: data/raw
      md5: fe35f77a115791e82129d337de5eda94.dir
      size: 1431241
      nfiles: 3
    - path: ext/
      md5: a29570cf0d735b4e8e2dddb3ef21f061.dir
      size: 3847856718
      nfiles: 4
  prepare_data@SKCountVectorizer:
    cmd: python src/prepare.py --preprocessor=SKCountVectorizer
    deps:
    - path: data/raw/train.csv
      md5: f147942c91d00d754503775341d13682
      size: 987712
    - path: src/prepare.py
      md5: 12e9d2f63195183836e91b7a17a3729a
      size: 884
    - path: src/preprocessors/SKCountVectorizer.py
      md5: 3b8b5bd05c8f54c5f092aad27b90fc33
      size: 615
    - path: src/preprocessors/abstract.py
      md5: 65c140546d2e5bc8585e87de02c9da83
      size: 4389
    outs:
    - path: data/prepared/SKCountVectorizer/labels.json
      md5: 76e06f8528ff37525b0f13d4dc8d6d0e
      size: 22860
    - path: data/prepared/SKCountVectorizer/preproc.joblib
      md5: 1f0a7457a2db376dd91dea3d618b1380
      size: 172555
    - path: data/prepared/SKCountVectorizer/texts.json
      md5: 1586b0b6d61168464daaee5cfded5390
      size: 538737
  prepare_data@TFTokenizer:
    cmd: python src/prepare.py --preprocessor=TFTokenizer
    deps:
    - path: data/raw/train.csv
      md5: f147942c91d00d754503775341d13682
      size: 987712
    - path: src/prepare.py
      md5: 12e9d2f63195183836e91b7a17a3729a
      size: 884
    - path: src/preprocessors/TFTokenizer.py
      md5: d6efba68f19fc7586c1b8d200ce3896c
      size: 856
    - path: src/preprocessors/abstract.py
      md5: 65c140546d2e5bc8585e87de02c9da83
      size: 4389
    outs:
    - path: data/prepared/TFTokenizer/labels.json
      md5: 76e06f8528ff37525b0f13d4dc8d6d0e
      size: 22860
    - path: data/prepared/TFTokenizer/preproc.joblib
      md5: ba711d2d031ff371cf808a92868286f2
      size: 529836
    - path: data/prepared/TFTokenizer/texts.json
      md5: 1586b0b6d61168464daaee5cfded5390
      size: 538737
  prepare_data@SKTfidfVectorizer:
    cmd: python src/prepare.py --preprocessor=SKTfidfVectorizer
    deps:
    - path: data/raw/train.csv
      md5: f147942c91d00d754503775341d13682
      size: 987712
    - path: src/prepare.py
      md5: 12e9d2f63195183836e91b7a17a3729a
      size: 884
    - path: src/preprocessors/SKTfidfVectorizer.py
      md5: cc3b741196ac214750ff1b373550540f
      size: 637
    - path: src/preprocessors/abstract.py
      md5: 65c140546d2e5bc8585e87de02c9da83
      size: 4389
    outs:
    - path: data/prepared/SKTfidfVectorizer/labels.json
      md5: 76e06f8528ff37525b0f13d4dc8d6d0e
      size: 22860
    - path: data/prepared/SKTfidfVectorizer/preproc.joblib
      md5: dd2fa60ee21851ab94826b168458a7a2
      size: 385767
    - path: data/prepared/SKTfidfVectorizer/texts.json
      md5: 1586b0b6d61168464daaee5cfded5390
      size: 538737
  prepare_data@GloVeVectorizer:
    cmd: python src/prepare.py --preprocessor=GloVeVectorizer
    deps:
    - path: data/raw/train.csv
      md5: f147942c91d00d754503775341d13682
      size: 987712
    - path: src/prepare.py
      md5: 12e9d2f63195183836e91b7a17a3729a
      size: 884
    - path: src/preprocessors/GloVeVectorizer.py
      md5: 34e214bcb7b353b2d6520da93ff00850
      size: 1670
    - path: src/preprocessors/abstract.py
      md5: 65c140546d2e5bc8585e87de02c9da83
      size: 4389
    outs:
    - path: data/prepared/GloVeVectorizer/labels.json
      md5: 76e06f8528ff37525b0f13d4dc8d6d0e
      size: 22860
    - path: data/prepared/GloVeVectorizer/preproc.joblib
      md5: 50dac33b370543b794ecfce13b8a4a60
      size: 529836
    - path: data/prepared/GloVeVectorizer/texts.json
      md5: 1586b0b6d61168464daaee5cfded5390
      size: 538737
